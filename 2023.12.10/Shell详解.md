哈喽，各位小伙伴大家好，我是小佟！相信Shell这个话题对于各位程序员或者计算机类的学生来说或多或少的都有一些了解，今天我们主要从实际使用的角度来对Shell进行深入的学习！

## Shell是什么？

1. 图形界面和命令行要达到的目的是一样的，都是让用户控制计算机。
2. 然而，真正能够控制计算机硬件（CPU、内存、显示器等）的只有操作系统内核（Kernel），图形界面和命令行只是架设在用户和内核之间的一座桥梁。
3. 由于安全、复杂、繁琐等原因，用户不能直接接触内核（也没有必要），需要另外再开发一个程序，让用户直接使用这个程序；该程序的作用就是接收用户的操作（点击图标、输入命令），并进行简单的处理，然后再传递给内核，这样用户就能间接地使用操作系统内核了。你看，在用户和内核之间增加一层“代理”，既能简化用户的操作，又能保障内核的安全，何乐不为呢？
4. 用户界面和命令行就是这个另外开发的程序，就是这层“代理”。在Linux和Mac下，这个命令行程序叫做Shell。
5. Shell是一个应用程序，它连接了用户和Linux内核，让用户能够更加高效、安全、低成本地使用Linux内核，这就是Shell的本质。
6. Shell本身并不是内核的一部分，它只是站在内核的基础上编写的一个应用程序，它和QQ、迅雷、Firefox等其它软件没有什么区别。
7. 那么Shell是如何连接用户和内核的呢？Shell程序本身的功能是很弱的，比如文件操作、输入输出、进程管理等都得依赖内核。我们运行一个命令，大部分情况下Shell都会去调用内核暴露出来的接口，这就是在使用内核，只是这个过程被Shell隐藏了起来，它自己在背后默默进行，我们看不到而已。接口其实就是一个一个的函数，使用内核就是调用这些函数。这就是使用内核的全部内容了吗？嗯，是的！除了函数，你没有别的途径使用内核。
8. 什么是Shell命令？在Shell中输入的命令，有一部分是Shell本身自带的，这叫做内置命令；有一部分是其它的应用程序（一个程序就是一个命令），这叫做外部命令。Shell本身支持的命令并不多，功能也有限，但是Shell可以调用其他的程序，每个程序就是一个命令，这使得Shell命令的数量可以无限扩展，其结果就是Shell的功能非常强大，完全能够胜任Linux的日常管理工作，如文本或字符串检索、文件的查找或创建、大规模软件的自动部署、更改系统设置、监控服务器性能、发送报警邮件、抓取网页内容、压缩文件等。更加惊讶的是，Shell还可以让多个外部程序发生连接，在它们之间很方便地传递数据，也就是把一个程序的输出结果传递给另一个程序作为输入。大家所说的Shell强大，并不是Shell本身功能丰富，而是它擅长使用和组织其他的程序。Shell就是一个领导者，这正是Shell的魅力所在。
9. Shell也支持编程，Shell就是一种脚本语言，我们编写完源码后不用编译，直接运行源码即可（类似于解释性语言）。
10. Shell的内置命令：https://c.biancheng.net/view/1136.html

## 深入学习Shell

1. 参考C语言中文网：https://c.biancheng.net/shell/

## Mac中默认使用的是什么Shell

1. 老版本的系统中默认使用的Shell是bash，比如Mojave10系统
2. 最新系统中默认使用的Shell是zsh，比如Sonama14系统

## 如何查看系统中的Shell

1. 查询系统所有支持的Shell：cat /etc/shells
2. 查询当前默认使用的Shell：echo $SHELL或者echo $0

## 配置文件

1. 在默认使用bash的时候，家目录的配置文件有两个：.bash_profile和.bashrc
2. 在默认使用zsh的时候，家目录的配置文件有两个：.zprofile和.zshrc
3. 无论是bash还是zsh，Mac系统的/etc目录下也会存在上述配置文件（非隐藏），那么与家目录下的配置文件相比较，两者有什么区别（以bash为例）？
   1. /etc/bash_profile，/etc/bashrc是系统全局环境变量设定
   2. ~/.bash_profile，~/.bashrc用户家目录下的私有环境变量设定
4. 以zsh为例，zprofile和zshrc都是环境变量配置文件，两者有什么区别呢？
   1. zprofile只在登陆Shell时（系统开机）执行一次，可以放置一些环境变量信息。
   2. zshrc在每次启动新Shell时（打开新的终端窗口或标签）都会执行，可以放置一些命令别名信息。
5. 无论是bash还是zsh，修改了之后如何使其生效？
   1. source ~/.zshrc或者source ~/.zprofile，即使用source命令
6. 以zsh为例，其配置文件加载顺序如下：

```shell
/etc/zshenv
~/.zshenv
/etc/zprofile
~/.zprofile
/etc/zshrc
~/.zshrc
/etc/zlogin
~/.zlogin
~/.zlogout
/etc/zlogout
```



