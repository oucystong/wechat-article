大家好，我是怪兽。

上节我们创建了插件项目，并且通过Action给插件项目添加了简单的通知功能，但其实在我们的IDEA中，还有一个扩展点的知识也是非常常用的。这节我们通过扩展点开发来使得开发的插件更像IDE的原生功能。

## IntelliJ 平台 IDE 拓展点

在IDEA中，我们可以经常可以看到侧边栏中有一些工具窗口，工具窗口是 IDE 的子窗口，这些窗口通常在主窗口的外边缘，我们称之为工具栏窗口。这些窗口中有按钮、界面，承载了插件的功能点。这种表现形式让插件更加像是 IDE 原生功能。

![image-20230220155823539](assets/image-20230220155823539.png)

如果没有接触过插件开发的小白可能会认为如果要开发这种类似于IDE原生功能的窗口，我们必须要修改IDE的源码才可以。其实不然，IDE给我们提供了丰富扩展点，通过开发对应的扩展点实现就可以很大程度上扩展模拟出IDE很多原生界面功能。由此可以看出IDE的源码扩展性是真的强，正因为扩展性强，也吸引了众多开发者积极开发对应平台的插件，在IDE竞争中，IDEA直接干掉Eclipse也变成了意料之内的事，正如现在的Vscode，正凭借其强大的插件功能占领编辑器市场，干掉一众老牌的Sublime Text、Notead++编辑器等，由此可见生态对于一个产品的重要性！

IntelliJ 平台把工具窗口实现成了一个“拓展点”，用户在开发的插件代码中，基于拓展点声明窗口的定义，定义包括：窗口的名字、图标等，再通过配置的形式注册到 IDE 中，即可看到我们自己的工具窗口。

类似的，在 Settings/Preferences 增加一个新的配置选项，也是 IDE 中的拓展点之一。点击 IDE 中的 Settings/Preferences ，我们打开了 IDE 的配置界面，这个界面中，可以看到很多配置项，若我们所开发的插件在运行的时候，需要用户先添加一些配置信息，可以基于 IDE 的配置拓展点，在Settings/Preferences 中实现我们的配置界面。

IntelliJ 平台和 IDE 捆绑插件（默认安装的插件）中有 1000 多个可用扩展点，今天主要基于上面提到的两个扩展点结合一个翻译的功能需求进行实战。

## 前提要求

在开始之前，我们需要先在[百度翻译开放平台](https://fanyi-api.baidu.com/)注册一个账号，并进行登录，点击管理控制台，获取一下个人翻译APPID和密钥。

>百度翻译开放平台：https://fanyi-api.baidu.com/

百度翻译要求接口请求的`QPS<=1`，这也就意味着个人使用免费。

## 项目实战

在开发之前，我们先说一下开发的主流程，其实每一个扩展点都对应着一个接口，我们需要做的就是定义一个实现类实现该接口，然后实现对应方法中的代码逻辑，最后将该实现类注册到插件配置文件中让IDE感知到即可。

新建一个项目traslator，具体过程不在赘述，创建完成之后，可以简单修改一下resources/META-INF/plugin.xml文件：

```xml
<idea-plugin>
    <id>com.codermonster.translator</id>
    <name>Translator</name>
    <vendor email="buaatys@163.com" url="https://codermonster.top/">码农怪兽</vendor>
    <description><![CDATA[
    翻译插件 | 码农怪兽
  ]]></description>
    <depends>com.intellij.modules.platform</depends>
    <extensions defaultExtensionNs="com.intellij">
    </extensions>
</idea-plugin>
```

该文件事插件的配置文件，主要是用来配置Action和扩展点，上面的信息任意修改即可，重要的是Action和扩展点的声明配置信息。











## 源码及文档下载

本教程的所有文档及源码可以关注微信公众号：码农怪兽，在公众号中回复关键字“IDEA插件开发”获取。
